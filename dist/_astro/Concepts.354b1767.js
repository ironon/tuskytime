let c=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");function f(e){return new Promise((t,n)=>{const o=new FileReader;o.onload=a=>t(o.result),o.onerror=a=>n(o.error),o.onabort=a=>n(new Error("Read aborted")),o.readAsDataURL(e)})}function l(){let e=localStorage.getItem("concepts");if(e){let t=JSON.parse(e);return t=t.filter(n=>n!==null),console.log(t),t}else return[]}let r=l();function i(){const e=new Date,t=e.getHours(),n=e.getMinutes(),o=e.getSeconds();return`${t}:${n}:${o}`}function g(){return r}function u(e){r.push(e),localStorage.setItem("concepts",JSON.stringify(r))}function p(){return{viewBackgroundColor:"#bacaf7",collaborators:[]}}function d(){const e={name:`Untitled Concept ${i()}`,id:c(),timeCreated:Date.now(),timeUpdated:Date.now(),favorite:!1,canvasData:{appState:p(),elements:[],files:{},libraryItems:[]}};return u(e),e}function s(){console.log(r),localStorage.setItem("concepts",JSON.stringify(r))}window.onbeforeunload=s;window.saveData=s;export{f as b,d as c,g};
